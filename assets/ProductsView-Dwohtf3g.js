import{d as w,r as i,o as C,c as S,a as n,b as r,e as t,f as b,_ as $,F as c,g as _,n as v,h as P,i as j,t as d,w as B,j as m}from"./index-DlkIuFvD.js";import{a as D,b as L}from"./products-DRv_-Thk.js";const T={class:"container"},V={class:"container mt-md-5 mt-3 mb-7"},z={class:"row"},A={class:"col-md-4"},G={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},M={class:"card border-0"},O={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},E={class:"card-body py-0"},F={class:"list-unstyled"},H=["onClick"],W={class:"col-md-8"},I={class:"row"},N={class:"card border-0 mb-4 position-relative position-relative"},R=["src"],q={class:"card-body p-0"},U={class:"mb-0 mt-3"},Y={class:"card-text mb-0"},J={class:"text-muted"},K={class:"d-flex justify-content-center"},Q={class:"pagination"},X={class:"page-item"},Z=["disabled"],tt=["onClick","disabled"],et={class:"page-item"},st=["disabled"],rt=w({__name:"ProductsView",setup(ot){const o=i("1"),u=i(""),g=i([]),p=i([]),l=i({total_pages:0,current_page:0,has_pre:!1,has_next:!1,category:""}),h=async()=>{try{const a=await D({page:o.value,category:u.value});g.value=a.data.products,l.value=a.data.pagination}catch{alert("取得產品列表失敗")}},f=async()=>{try{const a=await L();p.value=a.data.products}catch{alert("取得所有產品列表失敗")}};C(()=>{h(),f()});const y=S(()=>p.value?[...new Set(p.value.map(s=>s.category))]:[]);return(a,s)=>{const x=j("RouterLink");return r(),n(c,null,[t("div",T,[b($)]),s[7]||(s[7]=t("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"400px"}},[t("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1656275537622-7837184a0dcc?q=80&w=1350&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)","background-position":"center center","background-size":"cover","background-repeat":"no-repeat",opacity:"0.1"}}),t("h2",{class:"fw-bold"},"產品列表")],-1)),t("div",V,[t("div",z,[t("div",A,[t("div",G,[t("div",M,[s[3]||(s[3]=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center pe-1"},[t("h4",{class:"mb-0"},"分類"),t("i",{class:"fas fa-chevron-down"})])],-1)),t("div",O,[t("div",E,[t("ul",F,[t("li",null,[t("button",{onClick:s[0]||(s[0]=e=>u.value=""),class:"d-block py-2 border-0 bg-transparent text-muted",type:"button"}," 全部 ")]),(r(!0),n(c,null,_(y.value,e=>(r(),n("li",{key:e},[t("button",{onClick:k=>u.value=e,class:"d-block py-2 border-0 bg-transparent text-muted",type:"button"},d(e),9,H)]))),128))])])])])])]),t("div",W,[t("div",I,[(r(!0),n(c,null,_(g.value,e=>(r(),n("div",{key:e.id,class:"col-md-6"},[t("div",N,[t("img",{style:{height:"320px"},src:e.imageUrl,class:"card-img-top object-fit-cover rounded-0",alt:"琴葉榕"},null,8,R),s[4]||(s[4]=t("button",{type:"button",class:"position-absolute text-dark border-0 bg-transparent",style:{right:"16px",top:"16px"}},[t("i",{class:"far fa-heart"})],-1)),t("div",q,[t("h4",U,[b(x,{to:`/products/${e.id}`},{default:B(()=>[m(d(e.title),1)]),_:2},1032,["to"])]),t("p",Y,[m(" NT$"+d(e.price?.toLocaleString("zh-TW"))+" ",1),t("span",J,[t("del",null,"NT$"+d(e.origin_price?.toLocaleString("zh-TW")),1)])])])])]))),128))]),t("nav",K,[t("ul",Q,[t("li",X,[t("button",{onClick:s[1]||(s[1]=e=>o.value=(parseInt(o.value)-1).toString()),disabled:!l.value?.has_pre,type:"button",class:v(["page-link",{disabled:!l.value?.has_pre}]),"aria-label":"Previous"},[...s[5]||(s[5]=[t("span",{"aria-hidden":"true"},"«",-1)])],10,Z)]),(r(!0),n(c,null,_(l.value?.total_pages,e=>(r(),n("li",{key:e,class:v(["page-item",{active:o.value===e.toString()}])},[t("button",{onClick:k=>o.value=e.toString(),disabled:o.value===e.toString(),class:"page-link",type:"button"},d(e),9,tt)],2))),128)),t("li",et,[t("button",{onClick:s[2]||(s[2]=e=>o.value=(parseInt(o.value)+1).toString()),disabled:!l.value?.has_next,class:v(["page-link",{disabled:!l.value?.has_next}]),type:"button","aria-label":"Next"},[...s[6]||(s[6]=[t("span",{"aria-hidden":"true"},"»",-1)])],10,st)])])])])])]),b(P)],64)}}});export{rt as default};
